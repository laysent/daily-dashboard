(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/thunderstorm.58ebab15.svg"},function(t,e,n){t.exports=n.p+"static/media/heavy-rain.caa6ed2b.svg"},function(t,e,n){t.exports=n.p+"static/media/light-rain.06661442.svg"},function(t,e,n){t.exports=n.p+"static/media/snow.20ff1fe1.svg"},function(t,e,n){t.exports=n.p+"static/media/clear.a835ff7f.svg"},function(t,e,n){t.exports=n.p+"static/media/cloud.142dc879.svg"},function(t,e,n){t.exports=n.p+"static/media/bus.e574b9b3.svg"},function(t,e,n){t.exports=n.p+"static/media/umbrella.934ffe5a.svg"},function(t,e,n){t.exports=n.p+"static/media/mask.c11d3a66.svg"},function(t,e,n){t.exports=n(32)},,,,,,function(t,e,n){},,,,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var a,r,i=n(0),o=n.n(i),c=n(10),s=n.n(c),u=(n(26),n(1)),l=n.n(u),p=n(2),h=n(4),f=n(5),d=n(7),m=n(6),b=n(8),v=(n(30),n(3)),g=n(11),w=n.n(g),y=n(12),j=n.n(y),k=n(13),x=n.n(k),O=n(14),E=n.n(O),C=n(15),R=n.n(C),N=n(16),A=n.n(N),W=n(17),q=n.n(W);!function(t){t[t.thunderstorm=0]="thunderstorm",t[t.heavyRain=1]="heavyRain",t[t.lightRain=2]="lightRain",t[t.snow=3]="snow",t[t.clear=4]="clear",t[t.cloud=5]="cloud",t[t.bus=6]="bus"}(r||(r={}));var S,D=(a={},Object(v.a)(a,r.thunderstorm,w.a),Object(v.a)(a,r.heavyRain,j.a),Object(v.a)(a,r.lightRain,x.a),Object(v.a)(a,r.snow,E.a),Object(v.a)(a,r.clear,R.a),Object(v.a)(a,r.cloud,A.a),Object(v.a)(a,r.bus,q.a),a),B=function(t){function e(){return Object(h.a)(this,e),Object(d.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(f.a)(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.icon,a=t.title,r=t.subtitle,i=t.loading,c=t.children;return o.a.createElement("section",{className:e},!i&&o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{className:"icon",alt:"icon",src:D[n]}),o.a.createElement("h1",null,a),o.a.createElement("h3",null,r)),c)}}]),e}(i.Component);function M(t){return t>=200&&t<=232?r.thunderstorm:t>=300&&t<=321?r.heavyRain:t>=500&&t<=531?r.lightRain:t>=600&&t<=622?r.snow:800===t?r.clear:t>=801&&t<=804?r.cloud:r.clear}function U(){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(l.a.mark(function t(){var e,n,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.openweathermap.org/data/2.5/forecast/daily?lat=30.29365&lon=120.16142&units=metric&cnt=1&appid=d94bcd435b62a031771c35633f9f310a",t.next=3,fetch("https://api.openweathermap.org/data/2.5/forecast/daily?lat=30.29365&lon=120.16142&units=metric&cnt=1&appid=d94bcd435b62a031771c35633f9f310a");case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,a=n.list[0].temp,t.abrupt("return",{temperature:a,icon:M(n.list[0].weather[0].id),rainy:n.list[0].weather.some(function(t){var e=M(t.id);return e===r.lightRain||e===r.heavyRain})});case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(l.a.mark(function t(){var e,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.waqi.info/feed/@722/?token=877232d674043e76c5ea9037b8772e1aa4dbd702",t.next=3,fetch("https://api.waqi.info/feed/@722/?token=877232d674043e76c5ea9037b8772e1aa4dbd702");case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n.data);case 8:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function T(t){return F.apply(this,arguments)}function F(){return(F=Object(p.a)(l.a.mark(function t(e){var n,a,r,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e===S.toCompany?"work":"home",a=Date.now(),t.next=4,fetch("https://laysent-daily-transport.now.sh/?direction=".concat(n,"&timestamp=").concat(a,"&lat=30.29365&lng=120.16142"));case 4:return r=t.sent,t.next=7,r.json();case 7:return i=t.sent,t.abrupt("return",i);case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}!function(t){t[t.toCompany=0]="toCompany",t[t.fromCompany=1]="fromCompany"}(S||(S={}));var H=n(18),I=n.n(H),$=n(19),z=n.n($);function G(){return(new Date).getHours()<=10}var K=function(t){function e(){var t,n;Object(h.a)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={weather:{loading:!0,title:"",subtitle:"",rainy:!1,icon:r.clear},air:{loading:!0,aqi:0},buses:[]},n}return Object(b.a)(e,t),Object(f.a)(e,[{key:"getWeather",value:function(){var t=Object(p.a)(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:e=t.sent,this.setState({weather:{loading:!1,title:G()?e.temperature.morn:e.temperature.eve+" \xb0 C",subtitle:"".concat(e.temperature.night," ~ ").concat(e.temperature.day,"  \xb0 C"),rainy:e.rainy,icon:e.icon}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getAir",value:function(){var t=Object(p.a)(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:e=t.sent,this.setState({air:{loading:!1,aqi:e.aqi}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getBusDetails",value:function(){var t=Object(p.a)(l.a.mark(function t(){var e,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=G()?S.toCompany:S.fromCompany,t.next=3,T(e);case 3:n=t.sent,this.setState({buses:n.map(function(t){return Math.round(t/60)})});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getWeather(),this.getAir(),this.getBusDetails()}},{key:"render",value:function(){var t=this.state.buses;return o.a.createElement("main",{className:"app"},o.a.createElement(B,Object.assign({className:"weather"},this.state.weather),this.state.weather.rainy&&o.a.createElement("img",{src:I.a,alt:"bring umbrella",className:"small-icon left-bottom"}),!this.state.air.loading&&o.a.createElement("div",{className:"right-bottom"},Array.from({length:Math.floor(this.state.air.aqi/50)}).map(function(t,e){return o.a.createElement("img",{src:z.a,alt:"air condition icon",className:"small-icon",key:e})}))),o.a.createElement(B,{className:"transport",title:t.length>0?"".concat(t[0]," min"):"-",subtitle:t.length>1?"".concat(t.slice(1).map(function(t){return"".concat(t," min")}).join("/")):"",icon:r.bus,loading:!1}))}}]),e}(i.Component),Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}s.a.render(o.a.createElement(K,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/daily-dashboard",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/daily-dashboard","/service-worker.js");Q?(function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):V(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):V(e,t)})}}()}],[[20,2,1]]]);
//# sourceMappingURL=main.0e3e47d9.chunk.js.map