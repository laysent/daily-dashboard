{"version":3,"sources":["img/weather/thunderstorm.svg","img/weather/heavy-rain.svg","img/weather/light-rain.svg","img/weather/snow.svg","img/weather/clear.svg","img/weather/cloud.svg","img/bus.svg","img/bilibili.svg","img/eating.svg","img/loading.svg","img/play.svg","img/pause.svg","img/wallet.svg","img/umbrella.svg","img/mask.svg","img/left.svg","img/right.svg","img/check.svg","cards/Card.tsx","utils/bus.ts","utils/helper.ts","cards/Section.tsx","cards/Bus.tsx","utils/weather.ts","utils/air.ts","cards/Weather.jsx","utils/video.ts","cards/Video.tsx","cards/Eating.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","icons","busType","time","mapping","_mapping","Object","defineProperty","thunderstorm","heavyRain","lightRain","snow","clear","cloud","bus","video","eating","Card","_this$props","this","props","color","icon","title","subtitle","loading","link","children","react_default","a","createElement","style","backgroundColor","href","target","className","alt","src","Component","getBusDetails","_x","_getBusDetails","apply","arguments","_callee","type","direction","now","response","list","regenerator_default","wrap","_context","prev","next","toCompany","Date","fetch","concat","sent","json","abrupt","stop","isIn24Hours","date","setIntervalWhenActive","fn","timespan","previous","id","window","requestAnimationFrame","callback","timestamp","cancelAnimationFrame","getTime","hour","getHours","night","morning","noon","afternoon","evening","iPhone","test","navigator","userAgent","interval","Bus","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","asyncToGenerator","mark","buses","helper","setState","fetching","fromCompany","map","seconds","Math","round","onStatusChange","paused","catchingBus","length","cards_Card","slice","join","onClick","play","pause","wallet","PureComponent","Section_mapping","mapWeatherIcon","weatherId","getWeatherDetails","_getWeatherDetails","weatherResult","weatherTemperature","temp","temperature","weather","rainy","some","_ref","getAirDetails","_getAirDetails","data","Weather","air","aqi","details","morn","eve","day","getWeather","getAir","assign","umbrella","Array","from","floor","_","i","mask","key","fetchBilibili","getYoukuDetails","_x2","_getYoukuDetails","_callee2","name","_context2","Promise","resolve","reject","script","document","container","display","youku_callback","obj","error","html","innerHTML","body","appendChild","videos","querySelectorAll","li","querySelector","firstChild","Error","url","URL","origin","pathname","episodeNum","childNodes","textContent","episode","seasonId","source","removeChild","getBilibiliDetails","_getBilibiliDetails","_callee3","result","index","daysUntilToday","daysFromToday","firstDayWithUnpublishedVideo","nextUpdateTime","first","_context3","findIndex","is_today","find","seasons","season","is_published","filter","pub_index","matched","exec","pub_ts","season_id","ep_id","reduce","acc","getBilibiliUnwatched","playlist","cachedDetails","shouldUpdate","watched","unwatched","JSON","parse","localStorage","getItem","setItem","stringify","getYoukuUnwatched","all","videoList","lastWatchedEpisode","curr","Video","watchList","onNext","onPrevious","onWatched","toLowerCase","getPendingWatchList","e","then","bind","config","default","videoA","videoB","isVideoAToday","isVideoBToday","videoAIndex","videoBIndex","sort","hasUnwatched","hasPrevious","hasNext","undefined","left","right","check","Eating","sampler","Sampler","update","weekday","getDay","filtered","food","restrict","indexOf","meal","sample","element","weight","_this$state$eating","toArray","rest","App","updateTime","hidden","addEventListener","removeEventListener","child","React","Boolean","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fa2a48dd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/thunderstorm.58ebab15.svg\";","module.exports = __webpack_public_path__ + \"static/media/heavy-rain.caa6ed2b.svg\";","module.exports = __webpack_public_path__ + \"static/media/light-rain.06661442.svg\";","module.exports = __webpack_public_path__ + \"static/media/snow.20ff1fe1.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.a835ff7f.svg\";","module.exports = __webpack_public_path__ + \"static/media/cloud.142dc879.svg\";","module.exports = __webpack_public_path__ + \"static/media/bus.e574b9b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/bilibili.a13a87fb.svg\";","module.exports = __webpack_public_path__ + \"static/media/eating.f3642dc9.svg\";","module.exports = __webpack_public_path__ + \"static/media/loading.2d1490eb.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.68170af3.svg\";","module.exports = __webpack_public_path__ + \"static/media/pause.95cf549e.svg\";","module.exports = __webpack_public_path__ + \"static/media/wallet.976a3ad5.svg\";","module.exports = __webpack_public_path__ + \"static/media/umbrella.934ffe5a.svg\";","module.exports = __webpack_public_path__ + \"static/media/mask.c11d3a66.svg\";","module.exports = __webpack_public_path__ + \"static/media/left.4d5ba73f.svg\";","module.exports = __webpack_public_path__ + \"static/media/right.064b03a6.svg\";","module.exports = __webpack_public_path__ + \"static/media/check.47e2c3ee.svg\";","import React, { Component } from 'react';\nimport thunderstorm from '../img/weather/thunderstorm.svg';\nimport heavyRain from '../img/weather/heavy-rain.svg';\nimport lightRain from '../img/weather/light-rain.svg';\nimport snow from '../img/weather/snow.svg';\nimport clear from '../img/weather/clear.svg';\nimport cloud from '../img/weather/cloud.svg';\nimport bus from '../img/bus.svg';\nimport video from '../img/bilibili.svg';\nimport eating from '../img/eating.svg';\n\nexport enum icons {\n  thunderstorm,\n  heavyRain,\n  lightRain,\n  snow,\n  clear,\n  cloud,\n\n  bus,\n  video,\n  eating,\n};\n\nconst mapping = {\n  [icons.thunderstorm]: thunderstorm,\n  [icons.heavyRain]: heavyRain,\n  [icons.lightRain]: lightRain,\n  [icons.snow]: snow,\n  [icons.clear]: clear,\n  [icons.cloud]: cloud,\n\n  [icons.bus]: bus,\n  [icons.video]: video,\n  [icons.eating]: eating,\n};\n\nclass Card extends Component <{ color: string, icon: icons, title: string, subtitle: string, loading: boolean, link?: string }> {\n  render() {\n    const {\n      color,\n      icon,\n      title,\n      subtitle,\n      loading,\n      link,\n      children,\n    } = this.props;\n    return (\n      <section style={{ backgroundColor: color }}>\n        {!loading && (\n          <a href={link} target=\"_blank\" className=\"center\">\n            {icon && <img className=\"icon\" alt=\"icon\" src={mapping[icon]} />}\n            <h1>{title}</h1>\n            <h3>{subtitle}</h3>\n          </a>\n        )}\n        {children}\n      </section>\n    );\n  }\n}\n\nexport default Card;\n","export enum busType {\n  toCompany,\n  fromCompany,\n};\n\nexport default async function getBusDetails(type: busType) {\n  const direction = type === busType.toCompany ? 'work' : 'home';\n  const now = Date.now();\n  const response = await fetch(`https://laysent-daily-transport.now.sh/?direction=${direction}&timestamp=${now}&lat=30.29365&lng=120.16142`);\n  const list: Array<number> = await response.json();\n  return list;\n}\n","export function isMorning() {\n  return (new Date()).getHours() < 12;\n}\n\nexport function isToday(date: Date) {\n  const now = new Date();\n  return date.getFullYear() === now.getFullYear()\n    && date.getMonth() === now.getMonth()\n    && date.getDate() === now.getDate();\n}\n\nexport function isIn24Hours(date: Date) {\n  const now = new Date();\n  return (+now - +date) < 24 * 60 * 60 * 1000;\n}\n\nexport function setIntervalWhenActive(fn: () => void, timespan: number) {\n  let previous = 0;\n  let id: number | null = null;\n  function callback(timestamp: number) {\n    if (timestamp - previous >= timespan) {\n      fn();\n      previous = timestamp;\n    }\n    id = window.requestAnimationFrame(callback);\n  }\n  id = window.requestAnimationFrame(callback);\n  fn();\n  return () => {\n    if (id === null) return;\n    window.cancelAnimationFrame(id);\n    id = null;\n  };\n}\n\nexport enum time {\n  morning,\n  noon,\n  afternoon,\n  evening,\n  night\n};\n\nexport function getTime() {\n  const now = new Date();\n  const hour = now.getHours();\n  if (hour < 7) return time.night;\n  if (hour < 11) return time.morning;\n  if (hour < 14) return time.noon;\n  if (hour < 18) return time.afternoon;\n  if (hour < 22) return time.evening;\n  return time.night;\n}\n\nexport const iPhone = /iphone/i.test(navigator.userAgent);\n","import React, { Component } from 'react';\nimport thunderstorm from '../img/weather/thunderstorm.svg';\nimport heavyRain from '../img/weather/heavy-rain.svg';\nimport lightRain from '../img/weather/light-rain.svg';\nimport snow from '../img/weather/snow.svg';\nimport clear from '../img/weather/clear.svg';\nimport cloud from '../img/weather/cloud.svg';\nimport bus from '../img/bus.svg';\n\nexport enum icons {\n  thunderstorm,\n  heavyRain,\n  lightRain,\n  snow,\n  clear,\n  cloud,\n\n  bus,\n};\n\nconst mapping = {\n  [icons.thunderstorm]: thunderstorm,\n  [icons.heavyRain]: heavyRain,\n  [icons.lightRain]: lightRain,\n  [icons.snow]: snow,\n  [icons.clear]: clear,\n  [icons.cloud]: cloud,\n\n  [icons.bus]: bus,\n};\n\nclass Section extends Component <{ className: string, icon: icons, title: string, subtitle: string, loading: boolean }> {\n  render() {\n    const {\n      className,\n      icon,\n      title,\n      subtitle,\n      loading,\n      children,\n    } = this.props;\n    return (\n      <section className={className}>\n        {!loading && (\n          <React.Fragment>\n            <img className=\"icon\" alt=\"icon\" src={mapping[icon]} />\n            <h1>{title}</h1>\n            <h3>{subtitle}</h3>\n          </React.Fragment>\n        )}\n        {children}\n      </section>\n    );\n  }\n}\n\nexport default Section;\n","import React, { PureComponent } from 'react';\nimport Card, { icons } from './Card';\nimport getBusDetails, { busType } from '../utils/bus';\nimport * as helper from '../utils/helper';\nimport loading from '../img/loading.svg';\nimport play from '../img/play.svg';\nimport pause from '../img/pause.svg';\nimport wallet from '../img/wallet.svg';\n\nconst interval = 30 * 1000;\n\nclass Bus extends PureComponent {\n  state: {\n    buses: Array<number>;\n    fetching: boolean;\n    paused: boolean;\n  }\n  constructor(props: { }) {\n    super(props);\n    const time = helper.getTime();\n    const catchingBus = time === helper.time.morning || time === helper.time.evening;\n    this.state = {\n      buses: [],\n      fetching: false,\n      paused: !catchingBus,\n    };\n  }\n  stop: (() => void) | null = null;\n  getBusDetails = async () => {\n    const time = helper.getTime();\n    if (time === helper.time.night) {\n      this.setState({\n        buses: [],\n        fetching: false,\n      });\n      return;\n    }\n    const type = time === helper.time.morning ? busType.toCompany : busType.fromCompany;\n    this.setState({\n      fetching: true,\n    });\n    const buses = await getBusDetails(type);\n    this.setState({\n      buses: buses.map(seconds => Math.round(seconds / 60)),\n      fetching: false,\n    });\n  }\n  onStatusChange = () => {\n    const paused = !this.state.paused;\n    if (paused) {\n      if (this.stop !== null) this.stop();\n      this.stop = null;\n    } else {\n      this.stop = helper.setIntervalWhenActive(this.getBusDetails, interval);\n    }\n    this.setState({\n      paused,\n    });\n  }\n  componentDidMount() {\n    if (this.state.paused) {\n      this.getBusDetails();\n    } else {\n      this.stop = helper.setIntervalWhenActive(this.getBusDetails, interval);\n    }\n  }\n  componentWillUnmount() {\n    if (this.stop !== null) this.stop();\n  }\n  render() {\n    const buses = this.state.buses;\n    let title = 'Go Texi';\n    if (buses.length > 0) title = `${buses[0]} min`;\n    else if (this.state.fetching) title = '-';\n    return (\n      <Card\n        color=\"#f9d171\"\n        title={title}\n        subtitle={buses.length > 1 ? `${buses.slice(1).map(bus => `${bus} min`).join('/')}` : ''}\n        icon={icons.bus}\n        loading={false}\n      >\n        {this.state.fetching ? (\n          <img src={loading} alt=\"fetching\" className=\"small-icon right-top spinning\" />\n        ) : (\n          <button className=\"icon-button right-top\" onClick={this.onStatusChange}>\n            <img\n              src={this.state.paused ? play : pause}\n              alt={this.state.paused ? 'play' : 'pause'}\n              className=\"small-icon\"\n            />\n          </button>\n        )}\n        {helper.iPhone && <a href=\"alipayqr://platformapi/startapp?saId=200011235\" target=\"_blank\" className=\"icon-button left-top\">\n          <img src={wallet} alt=\"wallet\" className=\"small-icon\" />\n        </a>}\n      </Card>\n    );\n  }\n}\n\nexport default Bus;\n","import { icons } from '../cards/Section';\n\nfunction mapWeatherIcon(weatherId: number) {\n  if (weatherId >= 200 && weatherId <= 232) {\n    return icons.thunderstorm;\n  } else if (weatherId >= 300 && weatherId <= 321) {\n    return icons.heavyRain;\n  } else if (weatherId >= 500 && weatherId <= 531) {\n    return icons.lightRain;\n  } else if (weatherId >= 600 && weatherId <= 622) {\n    return icons.snow;\n  } else if (weatherId === 800) {\n    return icons.clear;\n  } else if (weatherId >= 801 && weatherId <= 804) {\n    return icons.cloud;\n  }\n  return icons.clear;\n}\ninterface Weather {\n  clouds: number;\n  deg: number;\n  dt: number;\n  humidity: number;\n  pressure: number;\n  speed: number;\n  temp: {\n    day: number;\n    min: number;\n    max: number;\n    night: number;\n    eve: number;\n    morn: number;\n  };\n  weather: Array<{\n    id: number;\n    main: string;\n    icon: string;\n    description: string;\n  }>;\n}\n\ninterface WeatherResponse {\n  city: {\n    id: number;\n    name: string;\n    coord: {\n      lon: number;\n      lat: number;\n    };\n    country: string;\n    population: number;\n  };\n  cnt: number;\n  cod: string;\n  message: number;\n  list: Array<Weather>\n}\n\nexport default async function getWeatherDetails() {\n  // Hit the weather API\n  const weatherApiUrl = 'https://api.openweathermap.org/data/2.5/forecast/daily?lat=30.29365&lon=120.16142&units=metric&cnt=1&appid=d94bcd435b62a031771c35633f9f310a';\n  const response = await fetch(weatherApiUrl);\n  const weatherResult: WeatherResponse = await response.json();\n\n  // Update the tempature\n  const weatherTemperature = weatherResult.list[0].temp;\n  return {\n    temperature: weatherTemperature,    \n    icon: mapWeatherIcon(weatherResult.list[0].weather[0].id),\n    rainy: weatherResult.list[0].weather.some(({ id }) => {\n      const icon = mapWeatherIcon(id);\n      return icon === icons.lightRain || icon === icons.heavyRain;\n    }),\n  };\n}\n","interface Air {\n  aqi: number;\n  attributions: Array<{\n    url: string;\n    name: string;\n  }>;\n  city: {\n    geo: [number, number];\n    name: string;\n    url: string;\n  };\n  debug: {\n    sync: string;\n  };\n  dominentpol: string;\n  iaqi: {\n    co: { v: number };\n    no2: { v: number };\n    o3: { v: number };\n    pm10: { v: number };\n    pm25: { v: number };\n    so2: { v: number };\n    w: { v: number };\n  };\n  idx: number;\n  time: {\n    v: number;\n  };\n}\n\ninterface AirResponse {\n  status: 'ok';\n  data: Air;\n}\n\nexport default async function getAirDetails() {\n  // http://aqicn.org/city/zhejiang/hangzhoushi/chaohuiwuqu/ to get @722\n  const url = 'https://api.waqi.info/feed/@722/?token=877232d674043e76c5ea9037b8772e1aa4dbd702';\n  const response = await fetch(url);\n  const json: AirResponse = await response.json();\n  return json.data;\n}\n","import React, { PureComponent } from 'react';\nimport Card from './Card';\nimport { icons } from './Section';\nimport umbrella from '../img/umbrella.svg';\nimport mask from '../img/mask.svg';\nimport getWeatherDetails from '../utils/weather';\nimport getAirDetails from '../utils/air';\nimport * as helper from '../utils/helper';\n\nclass Weather extends PureComponent {\n  state = {\n    weather: {\n      loading: true,\n      title: '',\n      subtitle: '',\n      rainy: false,\n      icon: icons.clear,\n    },\n    air: {\n      loading: true,\n      aqi: 0,\n    },\n  };\n  async getWeather() {\n    const details = await getWeatherDetails();\n\n    this.setState({\n      weather: {\n        loading: false,\n        title: helper.isMorning() ? details.temperature.morn : details.temperature.eve + ' ° C',\n        subtitle: `${details.temperature.night} ~ ${details.temperature.day}  ° C`,\n        rainy: details.rainy,\n        icon: details.icon,\n      },\n    });\n  }\n  async getAir() {\n    const details = await getAirDetails();\n    this.setState({\n      air: {\n        loading: false,\n        aqi: details.aqi,\n      },\n    });\n  }\n  componentDidMount() {\n    this.getWeather();\n    this.getAir();\n  }\n  render() {\n    return (\n      <Card\n        color=\"#38c9ba\"\n        {...this.state.weather}\n      >\n        {this.state.weather.rainy && (\n          <img src={umbrella} alt=\"bring umbrella\" className=\"small-icon left-bottom\" />\n        )}\n        {!this.state.air.loading && (\n          <div className=\"right-bottom\">\n            {Array.from({ length: Math.floor(this.state.air.aqi / 50) }).map((_, i) => (\n              <img src={mask} alt=\"air condition icon\" className=\"small-icon\" key={i} />\n            ))}\n          </div>\n        )}\n      </Card>\n    );\n  }\n}\n\nexport default Weather;\n","interface BilibiliVideo {\n  cover: string;\n  delay: number;\n  ep_id: number;\n  favorites: number;\n  follow: number;\n  is_published: 0 | 1;\n  pub_index: string;\n  pub_time: string;\n  pub_ts: number;\n  season_id: number;\n  season_status: number;\n  square_cover: string;\n  title: string;\n}\n\ninterface BilibiliVideosInDay {\n  date: string;\n  date_ts: number;\n  day_of_week: number;\n  is_today: 0 | 1;\n  seasons: Array<BilibiliVideo>;\n}\n\ninterface BilibiliTimelineResponse {\n  code: number;\n  message: 'success';\n  result: Array<BilibiliVideosInDay>;\n}\n\nexport interface VideoDetails {\n  date: number;\n  episode: string;\n  title: string;\n  seasonId: number;\n  episodeNum: number;\n  href: string;\n  source: string;\n}\n\nasync function fetchBilibili() {\n  const response = await fetch('https://cors-anywhere.herokuapp.com/http://bangumi.bilibili.com/web_api/timeline_global');\n  const json: BilibiliTimelineResponse = await response.json();\n  return json;\n}\n\nexport async function getYoukuDetails(id: number, name: string) : Promise<VideoDetails[]> {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    const container = document.createElement('div');\n    container.style.display = 'none';\n    window.youku_callback = (obj) => {\n      if (obj.error) {\n        return reject(obj);\n      }\n      const html = obj.html;\n      container.innerHTML = html;\n      document.body.appendChild(container);\n\n      const videos: Array<VideoDetails> = Array.from(container.querySelectorAll('.p-panels ul li'))\n        .map((li) => {\n          const link = li.querySelector('a');\n          if (!link || !li.firstChild) throw new Error('failed to parse structure');\n          const url = new URL(link.href);\n          const href = url.origin + url.pathname;\n          // const isVIP = !!li.querySelector('.p-icon-vip');\n          const episodeNum = li.firstChild.childNodes[0].textContent || '';\n          const title = link.textContent || '';\n          return {\n            date: 0,\n            href,\n            episode: `#${episodeNum} ${title}`,\n            episodeNum: +episodeNum,\n            title: name,\n            seasonId: id,\n            source: 'Youku',\n          };\n        });\n\n      delete window.youku_callback;\n      document.body.removeChild(container);\n      document.body.removeChild(script);\n\n      resolve(videos);\n    };\n    script.src = `https://list.youku.com/show/module?id=${id}&tab=showInfo&callback=youku_callback`;\n    script.type = 'text/javascript';\n    document.body.appendChild(script);\n  });\n\n}\n\nexport async function getBilibiliDetails() {\n  const { result } = await fetchBilibili();\n  const index = result.findIndex(day => day.is_today === 1);\n  const daysUntilToday = result.slice(0, index + 1);\n  const daysFromToday = result.slice(index);\n  const firstDayWithUnpublishedVideo =\n    daysFromToday.find(day => day.seasons.findIndex(season => season.is_published === 0) >= 0);\n  const videos: Array<VideoDetails> = daysUntilToday\n    .map((day) => day.seasons\n      .filter(season => season.is_published === 1)\n      .map(season => {\n        const episode = season.pub_index;\n        const matched = /第([\\d.]+)话/.exec(episode);\n        let episodeNum = 0;\n        if (matched) {\n          episodeNum = +matched[1];\n        }\n        return {\n          date: season.pub_ts * 1000,\n          episode,\n          title: season.title,\n          seasonId: season.season_id,\n          episodeNum,\n          href: `https://m.bilibili.com/bangumi/play/ep${season.ep_id}`,\n          source: 'Bilibili',\n        };\n      })\n    )\n    .reduce((acc, day) => acc.concat(day), []);\n  let nextUpdateTime = 0;\n  if (firstDayWithUnpublishedVideo) {\n    const first = firstDayWithUnpublishedVideo.seasons.find(season => season.is_published === 0) as BilibiliVideo;\n    nextUpdateTime = first.pub_ts * 1000;\n  }\n  return {\n    videos,\n    nextUpdateTime,\n  };\n}","import React, { PureComponent } from 'react';\nimport Card, { icons } from './Card';\nimport { getBilibiliDetails, VideoDetails, getYoukuDetails } from '../utils/video';\nimport * as helper from '../utils/helper';\nimport left from '../img/left.svg';\nimport right from '../img/right.svg';\nimport check from '../img/check.svg';\n\nfunction getWatchList() {\n  return import('../config'/* webpackChunkName: 'config' */).then(config => config.default.videos);\n}\n\nasync function getBilibiliUnwatched(playlist: { id: number }[]) {\n  const cachedDetails: {\n    nextUpdateTime: number;\n    videos: Array<VideoDetails>;\n  } = JSON.parse(localStorage.getItem('bilibili-videos') || '{\"nextUpdateTime\":0,\"videos\":[]}');\n  const shouldUpdate = cachedDetails.nextUpdateTime < Date.now();\n  const details = await (shouldUpdate ? getBilibiliDetails() : Promise.resolve(cachedDetails));\n  const { videos } = details;\n  if (shouldUpdate) {\n    localStorage.setItem('bilibili-videos', JSON.stringify(details));\n  }\n  const watched = JSON.parse(localStorage.getItem('bilibili') || '{}');\n  const unwatched = videos\n  .filter((video) => {\n    const season = video.seasonId;\n    return playlist.some(video => video.id === season);\n  })\n  .filter((video) => {\n    const season = video.seasonId;\n    const lastWatchedEpisode = watched[season] || 0;\n    return lastWatchedEpisode < video.episodeNum;\n  });\n\n  return unwatched;\n}\n\nasync function getYoukuUnwatched(playlist: { id: number, name: string }[]) {\n  const videos = await Promise.all(playlist.map(({ id, name }) => getYoukuDetails(id, name)));\n  const watched = JSON.parse(localStorage.getItem('youku') || '{}');\n  return videos\n    .map((videoList, i) => {\n      const { id } = playlist[i];\n      const lastWatchedEpisode = watched[id] || 0;\n      return videoList.filter(video => video.episodeNum > lastWatchedEpisode);\n    })\n    .reduce((prev, curr) => prev.concat(curr), []);\n}\n\nclass Video extends PureComponent {\n  state: { watchList: Array<VideoDetails>, index: number } = {\n    watchList: [],\n    index: 0,\n  }\n  async getPendingWatchList() {\n    const playlist = await getWatchList();\n    const unwatched = (await Promise.all([\n      getBilibiliUnwatched(playlist.filter(video => video.source === 'bilibili')),\n      getYoukuUnwatched(playlist.filter(video => video.source === 'youku')),\n    ]))\n    .reduce((prev, curr) => prev.concat(curr), [])\n    .sort((videoA, videoB) => {\n      const isVideoAToday = helper.isIn24Hours(new Date(videoA.date));\n      const isVideoBToday = helper.isIn24Hours(new Date(videoB.date));\n      if (isVideoAToday && !isVideoBToday) return -1;\n      if (!isVideoAToday && isVideoBToday) return 1;\n      const videoAIndex = playlist.findIndex(video => video.id === videoA.seasonId);\n      const videoBIndex = playlist.findIndex(video => video.id === videoB.seasonId);\n      if (videoAIndex < videoBIndex) return -1;\n      if (videoAIndex > videoBIndex) return 1;\n      return videoA.episodeNum > videoB.episodeNum ? 1 : -1;\n    });\n\n    this.setState({ watchList: unwatched, index: 0 });\n  }\n  onNext = () => {\n    this.setState({\n      index: this.state.index + 1,\n    });\n  }\n  onPrevious = () => {\n    this.setState({\n      index: this.state.index - 1,\n    });\n  }\n  onWatched = () => {\n    const video = this.state.watchList[this.state.index];\n    const source = video.source.toLowerCase();\n    const watched: any = JSON.parse(localStorage.getItem(source) || '{}');\n    watched[video.seasonId] = video.episodeNum;\n    localStorage.setItem(source, JSON.stringify(watched));\n    this.getPendingWatchList();\n  }\n  componentDidMount() {\n    this.getPendingWatchList(); \n  }\n  render() {\n    const video = this.state.watchList[this.state.index];\n    const hasUnwatched = !!video;\n    const hasPrevious = this.state.index > 0;\n    const hasNext = this.state.index < this.state.watchList.length - 1;\n    return (\n      <Card\n        color=\"#6994e3\"\n        title={hasUnwatched ? video.source : '-'}\n        subtitle={hasUnwatched ? video.title : ''}\n        icon={icons.video}\n        loading={false}\n        link={hasUnwatched ? video.href : undefined}\n      >\n        {hasPrevious && (\n          <button className=\"icon-button left-top\" onClick={this.onPrevious}>\n            <img src={left} alt=\"previous\" className=\"small-icon\" />\n          </button>\n        )}\n        {hasNext && (\n          <button className=\"icon-button right-top\" onClick={this.onNext}>\n            <img src={right} alt=\"next\" className=\"small-icon\" />\n          </button>\n        )}\n        <button className=\"icon-button left-bottom\" onClick={this.onWatched}>\n          <img src={check} alt=\"set watched\" className=\"small-icon\" />\n        </button>\n        <span className=\"right-bottom\">{hasUnwatched ? video.episode : ''}</span>\n      </Card>\n    );\n  }\n}\n\nexport default Video;\n","import React, { PureComponent } from 'react';\nimport Sampler from 'random-sampler';\nimport Card, { icons } from './Card';\nimport * as helper from '../utils/helper';\n\nfunction getEating() {\n  return import('../config' /* webpackChunkName */).then(config => config.default.eating);\n}\n\nclass Eating extends PureComponent {\n  state: { loading: boolean, eating: Array<{ name: string }> } = {\n    loading: true,\n    eating: [],\n  };\n  sampler: Sampler = new Sampler();\n  componentDidMount() {\n    this.update();\n  }\n  update = () => {\n    if (!this.state.loading) {\n      this.setState({\n        loading: true,\n      });\n    }\n    getEating().then((list) => {\n      const time = helper.getTime();\n      const weekday = (new Date()).getDay();\n      const filtered = list.filter((food) => {\n        if (typeof food.restrict === 'undefined') return true;\n        const restrict = food.restrict;\n        if (typeof restrict.day !== 'undefined' && restrict.day.indexOf(weekday) < 0) return false;\n        if (typeof restrict.meal !== 'undefined') {\n          if (restrict.meal === 'dinner') {\n            if (time !== helper.time.evening) return false;\n          } else if (restrict.meal === 'lunch') {\n            if (time !== helper.time.noon) return false;\n          }\n        }\n        return true;\n      });\n      this.setState({\n        eating: this.sampler.sample(filtered, 5, element => element.weight),\n        loading: false,\n      });\n    });\n  }\n  render() {\n    const [first, ...rest] = this.state.eating;\n    return (\n      <Card\n        color=\"#cc5c75\"\n        title={first && first.name}\n        subtitle={first && rest.map(food => food.name).join('/')}\n        icon={icons.eating}\n        loading={this.state.loading}\n      />\n    )\n  }\n}\n\nexport default Eating;\n","import React, { PureComponent } from 'react';\nimport './App.css';\nimport Bus from './cards/Bus';\nimport Weather from './cards/Weather';\nimport Video from './cards/Video';\nimport Eating from './cards/Eating';\nimport { time, getTime } from './utils/helper';\n\nclass App extends PureComponent {\n  state: { time: time };\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      time: getTime(),\n    };\n  }\n  updateTime = () => {\n    if (!document.hidden) {\n      this.setState({ time: getTime() });\n    }\n  }\n  componentDidMount() {\n    document.addEventListener('visibilitychange', this.updateTime, false);\n  }\n  componentWillUnmount() {\n    document.removeEventListener('visibilitychange', this.updateTime);\n  }\n  render() {\n    let children: Array<any> = [];\n    switch (this.state.time) {\n      case time.morning:\n        children = [Weather, Bus, Video, Eating];\n        break;\n      case time.noon:\n        children = [Eating, Video, Weather, Bus];\n        break;\n      case time.afternoon:\n        children = [Weather, Video, Eating, Bus];\n        break;\n      case time.evening:\n        children = [Eating, Bus, Video, Weather];\n        break;\n      case time.night:\n        children = [Video, Weather, Bus, Eating];\n        break;\n    }\n    return (\n      <main className=\"app\">\n        {children.map(child => React.createElement(child, { key: child.name }))}\n      </main>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}