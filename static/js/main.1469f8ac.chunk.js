(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/thunderstorm.58ebab15.svg"},function(t,e,n){t.exports=n.p+"static/media/heavy-rain.caa6ed2b.svg"},function(t,e,n){t.exports=n.p+"static/media/light-rain.06661442.svg"},function(t,e,n){t.exports=n.p+"static/media/snow.20ff1fe1.svg"},function(t,e,n){t.exports=n.p+"static/media/clear.a835ff7f.svg"},function(t,e,n){t.exports=n.p+"static/media/cloud.142dc879.svg"},function(t,e,n){t.exports=n.p+"static/media/bus.e574b9b3.svg"},,,,,function(t,e,n){t.exports=n.p+"static/media/bilibili.a13a87fb.svg"},function(t,e,n){t.exports=n.p+"static/media/eating.f3642dc9.svg"},function(t,e,n){t.exports=n.p+"static/media/loading.2d1490eb.svg"},function(t,e,n){t.exports=n.p+"static/media/play.68170af3.svg"},function(t,e,n){t.exports=n.p+"static/media/pause.95cf549e.svg"},function(t,e,n){t.exports=n.p+"static/media/wallet.976a3ad5.svg"},function(t,e,n){t.exports=n.p+"static/media/umbrella.934ffe5a.svg"},function(t,e,n){t.exports=n.p+"static/media/mask.c11d3a66.svg"},function(t,e,n){t.exports=n.p+"static/media/left.4d5ba73f.svg"},function(t,e,n){t.exports=n.p+"static/media/right.064b03a6.svg"},function(t,e,n){t.exports=n.p+"static/media/check.47e2c3ee.svg"},,,,,function(t,e,n){t.exports=n(48)},,,,,,function(t,e,n){},,function(t,e,n){},,,,,function(t,e,n){"use strict";n.r(e);var a,i,r=n(0),o=n.n(r),s=n(19),c=n.n(s),u=(n(41),n(2)),l=n(3),d=n(7),p=n(6),f=n(8),h=(n(43),n(1)),m=n.n(h),b=n(5),g=n(4),v=n(9),w=n.n(v),y=n(10),x=n.n(y),O=n(11),j=n.n(O),k=n(12),E=n.n(k),N=n(13),S=n.n(N),C=n(14),D=n.n(C),R=n(15),W=n.n(R),A=n(20),I=n.n(A),P=n(21),_=n.n(P);!function(t){t[t.thunderstorm=0]="thunderstorm",t[t.heavyRain=1]="heavyRain",t[t.lightRain=2]="lightRain",t[t.snow=3]="snow",t[t.clear=4]="clear",t[t.cloud=5]="cloud",t[t.bus=6]="bus",t[t.video=7]="video",t[t.eating=8]="eating"}(i||(i={}));var L,q,M,T=(a={},Object(g.a)(a,i.thunderstorm,w.a),Object(g.a)(a,i.heavyRain,x.a),Object(g.a)(a,i.lightRain,j.a),Object(g.a)(a,i.snow,E.a),Object(g.a)(a,i.clear,S.a),Object(g.a)(a,i.cloud,D.a),Object(g.a)(a,i.bus,W.a),Object(g.a)(a,i.video,I.a),Object(g.a)(a,i.eating,_.a),a),U=function(t){function e(){return Object(u.a)(this,e),Object(d.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.color,n=t.icon,a=t.title,i=t.subtitle,r=t.loading,s=t.link,c=t.children;return o.a.createElement("section",{style:{backgroundColor:e}},!r&&o.a.createElement("a",{href:s,target:"_blank",className:"center"},n&&o.a.createElement("img",{className:"icon",alt:"icon",src:T[n]}),o.a.createElement("h1",null,a),o.a.createElement("h3",null,i)),c)}}]),e}(r.Component);function B(t){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(m.a.mark(function t(e){var n,a,i,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e===L.toCompany?"work":"home",a=Date.now(),t.next=4,fetch("https://laysent-daily-transport.now.sh/?direction=".concat(n,"&timestamp=").concat(a,"&lat=30.29365&lng=120.16142"));case 4:return i=t.sent,t.next=7,i.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function F(t){var e=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function H(t,e){var n=0,a=null;return a=window.requestAnimationFrame(function i(r){r-n>=e&&(t(),n=r),a=window.requestAnimationFrame(i)}),t(),function(){null!==a&&(window.cancelAnimationFrame(a),a=null)}}function Y(){var t=(new Date).getHours();return t<7?q.night:t<11?q.morning:t<14?q.noon:t<18?q.afternoon:t<22?q.evening:q.night}!function(t){t[t.toCompany=0]="toCompany",t[t.fromCompany=1]="fromCompany"}(L||(L={})),(M=q||(q={}))[M.morning=0]="morning",M[M.noon=1]="noon",M[M.afternoon=2]="afternoon",M[M.evening=3]="evening",M[M.night=4]="night";var G,$,z=/iphone/i.test(navigator.userAgent),K=n(22),Q=n.n(K),V=n(23),X=n.n(V),Z=n(24),tt=n.n(Z),et=n(25),nt=n.n(et),at=3e4,it=function(t){function e(t){var n;Object(u.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).state=void 0,n.stop=null,n.getBusDetails=Object(b.a)(m.a.mark(function t(){var e,a,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=Y())!==q.night){t.next=4;break}return n.setState({buses:[],fetching:!1}),t.abrupt("return");case 4:return a=e===q.morning?L.toCompany:L.fromCompany,n.setState({fetching:!0}),t.next=8,B(a);case 8:i=t.sent,n.setState({buses:i.map(function(t){return Math.round(t/60)}),fetching:!1});case 10:case"end":return t.stop()}},t,this)})),n.onStatusChange=function(){var t=!n.state.paused;t?(null!==n.stop&&n.stop(),n.stop=null):n.stop=H(n.getBusDetails,at),n.setState({paused:t})};var a=Y(),i=a===q.morning||a===q.evening;return n.state={buses:[],fetching:!1,paused:!i},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.state.paused?this.getBusDetails():this.stop=H(this.getBusDetails,at)}},{key:"componentWillUnmount",value:function(){null!==this.stop&&this.stop()}},{key:"render",value:function(){var t=this.state.buses,e="Go Texi";return t.length>0?e="".concat(t[0]," min"):this.state.fetching&&(e="-"),o.a.createElement(U,{color:"#f9d171",title:e,subtitle:t.length>1?"".concat(t.slice(1).map(function(t){return"".concat(t," min")}).join("/")):"",icon:i.bus,loading:!1},this.state.fetching?o.a.createElement("img",{src:Q.a,alt:"fetching",className:"small-icon right-top spinning"}):o.a.createElement("button",{className:"icon-button right-top",onClick:this.onStatusChange},o.a.createElement("img",{src:this.state.paused?X.a:tt.a,alt:this.state.paused?"play":"pause",className:"small-icon"})),z&&o.a.createElement("a",{href:"alipayqr://platformapi/startapp?saId=200011235",target:"_blank",className:"icon-button left-top"},o.a.createElement("img",{src:nt.a,alt:"wallet",className:"small-icon"})))}}]),e}(r.PureComponent);!function(t){t[t.thunderstorm=0]="thunderstorm",t[t.heavyRain=1]="heavyRain",t[t.lightRain=2]="lightRain",t[t.snow=3]="snow",t[t.clear=4]="clear",t[t.cloud=5]="cloud",t[t.bus=6]="bus"}($||($={}));var rt=(G={},Object(g.a)(G,$.thunderstorm,w.a),Object(g.a)(G,$.heavyRain,x.a),Object(g.a)(G,$.lightRain,j.a),Object(g.a)(G,$.snow,E.a),Object(g.a)(G,$.clear,S.a),Object(g.a)(G,$.cloud,D.a),Object(g.a)(G,$.bus,W.a),G),ot=(r.Component,n(26)),st=n.n(ot),ct=n(27),ut=n.n(ct);function lt(t){return t>=200&&t<=232?$.thunderstorm:t>=300&&t<=321?$.heavyRain:t>=500&&t<=531?$.lightRain:t>=600&&t<=622?$.snow:800===t?$.clear:t>=801&&t<=804?$.cloud:$.clear}function dt(){return pt.apply(this,arguments)}function pt(){return(pt=Object(b.a)(m.a.mark(function t(){var e,n,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.openweathermap.org/data/2.5/forecast/daily?lat=30.29365&lon=120.16142&units=metric&cnt=1&appid=d94bcd435b62a031771c35633f9f310a",t.next=3,fetch("https://api.openweathermap.org/data/2.5/forecast/daily?lat=30.29365&lon=120.16142&units=metric&cnt=1&appid=d94bcd435b62a031771c35633f9f310a");case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,a=n.list[0].temp,t.abrupt("return",{temperature:a,icon:lt(n.list[0].weather[0].id),rainy:n.list[0].weather.some(function(t){var e=lt(t.id);return e===$.lightRain||e===$.heavyRain})});case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function ft(){return ht.apply(this,arguments)}function ht(){return(ht=Object(b.a)(m.a.mark(function t(){var e,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.waqi.info/feed/@722/?token=877232d674043e76c5ea9037b8772e1aa4dbd702",t.next=3,fetch("https://api.waqi.info/feed/@722/?token=877232d674043e76c5ea9037b8772e1aa4dbd702");case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n.data);case 8:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var mt=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(d.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(i)))).state={weather:{loading:!0,title:"",subtitle:"",rainy:!1,icon:$.clear},air:{loading:!0,aqi:0}},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getWeather",value:function(){var t=Object(b.a)(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt();case 2:e=t.sent,this.setState({weather:{loading:!1,title:(new Date).getHours()<12?e.temperature.morn:e.temperature.eve+" \xb0 C",subtitle:"".concat(e.temperature.night," ~ ").concat(e.temperature.day,"  \xb0 C"),rainy:e.rainy,icon:e.icon}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getAir",value:function(){var t=Object(b.a)(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft();case 2:e=t.sent,this.setState({air:{loading:!1,aqi:e.aqi}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getWeather(),this.getAir()}},{key:"render",value:function(){return o.a.createElement(U,Object.assign({color:"#38c9ba"},this.state.weather),this.state.weather.rainy&&o.a.createElement("img",{src:st.a,alt:"bring umbrella",className:"small-icon left-bottom"}),!this.state.air.loading&&o.a.createElement("div",{className:"right-bottom"},Array.from({length:Math.floor(this.state.air.aqi/50)}).map(function(t,e){return o.a.createElement("img",{src:ut.a,alt:"air condition icon",className:"small-icon",key:e})})))}}]),e}(r.PureComponent),bt=n(33);function gt(){return vt.apply(this,arguments)}function vt(){return(vt=Object(b.a)(m.a.mark(function t(){var e,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://cors-anywhere.herokuapp.com/http://bangumi.bilibili.com/web_api/timeline_global");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function wt(){return yt.apply(this,arguments)}function yt(){return(yt=Object(b.a)(m.a.mark(function t(){var e,n,a,i,r,o,s,c,u;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt();case 2:return e=t.sent,n=e.result,a=n.findIndex(function(t){return 1===t.is_today}),i=n.slice(0,a+1),r=n.slice(a),o=r.find(function(t){return t.seasons.findIndex(function(t){return 0===t.is_published})>=0}),s=i.map(function(t){return t.seasons.filter(function(t){return 1===t.is_published}).map(function(t){var e=t.pub_index,n=/\u7b2c([\d.]+)\u8bdd/.exec(e),a=0;return n&&(a=+n[1]),{date:1e3*t.pub_ts,episode:e,title:t.title,seasonId:t.season_id,id:t.ep_id,episodeNum:a}})}).reduce(function(t,e){return t.concat(e)},[]),c=0,o&&(u=o.seasons.find(function(t){return 0===t.is_published}),c=1e3*u.pub_ts),t.abrupt("return",{videos:s,nextUpdateTime:c});case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var xt=n(28),Ot=n.n(xt),jt=n(29),kt=n.n(jt),Et=n(30),Nt=n.n(Et);var St=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(d.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(i)))).state={watchList:[],index:0},n.onNext=function(){n.setState({index:n.state.index+1})},n.onPrevious=function(){n.setState({index:n.state.index-1})},n.onWatched=function(){var t=JSON.parse(localStorage.getItem("bilibili")||"{}"),e=n.state.watchList[n.state.index];t[e.seasonId]=e.episodeNum,localStorage.setItem("bilibili",JSON.stringify(t)),n.getPendingWatchList()},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"getPendingWatchList",value:function(){var t=Object(b.a)(m.a.mark(function t(){var e,a,i,r,o,s,c,u,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse(localStorage.getItem("bilibili-videos")||'{"nextUpdateTime":0,"videos":[]}'),a=e.nextUpdateTime<Date.now(),t.next=4,Promise.all([n.e(0).then(n.bind(null,49)).then(function(t){return t.default.video}),a?wt():Promise.resolve(e)]);case 4:i=t.sent,r=Object(bt.a)(i,2),o=r[0],s=r[1],c=s.videos,a&&localStorage.setItem("bilibili-videos",JSON.stringify(s)),u=JSON.parse(localStorage.getItem("bilibili")||"{}"),l=c.filter(function(t){var e=t.seasonId;return o.bilibili.indexOf(e)>=0}).filter(function(t){var e=t.seasonId;return(u[e]||0)<t.episodeNum}).sort(function(t,e){var n=F(new Date(t.date)),a=F(new Date(e.date));if(n&&!a)return-1;if(!n&&a)return 1;var i=o.bilibili.indexOf(t.seasonId),r=o.bilibili.indexOf(e.seasonId);return i<r?-1:i>r?1:t.episode>e.episode?1:-1}),this.setState({watchList:l,index:0});case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getPendingWatchList()}},{key:"render",value:function(){var t=this.state.watchList[this.state.index],e=!!t,n=this.state.index>0,a=this.state.index<this.state.watchList.length-1;return o.a.createElement(U,{color:"#6994e3",title:e?"Bilibili":"-",subtitle:e?t.title:"",icon:i.video,loading:!1,link:e?"https://m.bilibili.com/bangumi/play/ep".concat(t.id):void 0},n&&o.a.createElement("button",{className:"icon-button left-top",onClick:this.onPrevious},o.a.createElement("img",{src:Ot.a,alt:"previous",className:"small-icon"})),a&&o.a.createElement("button",{className:"icon-button right-top",onClick:this.onNext},o.a.createElement("img",{src:kt.a,alt:"next",className:"small-icon"})),o.a.createElement("button",{className:"icon-button left-bottom",onClick:this.onWatched},o.a.createElement("img",{src:Nt.a,alt:"set watched",className:"small-icon"})),o.a.createElement("span",{className:"right-bottom"},e?t.episode:""))}}]),e}(r.PureComponent),Ct=n(34),Dt=n(32);var Rt=function(t){function e(){var t,a;Object(u.a)(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(r)))).state={loading:!0,eating:[]},a.sampler=new Dt.a,a.update=function(){a.state.loading||a.setState({loading:!0}),n.e(0).then(n.bind(null,49)).then(function(t){return t.default.eating}).then(function(t){var e=Y(),n=(new Date).getDay(),i=t.filter(function(t){if("undefined"===typeof t.restrict)return!0;var a=t.restrict;if("undefined"!==typeof a.day&&a.day.indexOf(n)<0)return!1;if("undefined"!==typeof a.meal)if("dinner"===a.meal){if(e!==q.evening)return!1}else if("lunch"===a.meal&&e!==q.noon)return!1;return!0});a.setState({eating:a.sampler.sample(i,5,function(t){return t.weight}),loading:!1})})},a}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){var t=Object(Ct.a)(this.state.eating),e=t[0],n=t.slice(1);return o.a.createElement(U,{color:"#cc5c75",title:e&&e.name,subtitle:e&&n.map(function(t){return t.name}).join("/"),icon:i.eating,loading:this.state.loading})}}]),e}(r.PureComponent),Wt=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(d.a)(this,Object(p.a)(e).call(this,t))).state=void 0,n.updateTime=function(){document.hidden||n.setState({time:Y()})},n.state={time:Y()},n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){document.addEventListener("visibilitychange",this.updateTime,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",this.updateTime)}},{key:"render",value:function(){var t=[];switch(this.state.time){case q.morning:t=[mt,it,St,Rt];break;case q.noon:t=[Rt,St,mt,it];break;case q.afternoon:t=[mt,St,Rt,it];break;case q.evening:t=[Rt,it,St,mt];break;case q.night:t=[St,mt,it,Rt]}return o.a.createElement("main",{className:"app"},t.map(function(t){return o.a.createElement(t,{key:t.name})}))}}]),e}(r.PureComponent),At=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function It(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}c.a.render(o.a.createElement(Wt,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/daily-dashboard",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/daily-dashboard","/service-worker.js");At?(function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):It(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):It(e,t)})}}()}],[[35,3,2]]]);
//# sourceMappingURL=main.1469f8ac.chunk.js.map